"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createTxErrorFromJson = exports.isWebExtensionError = exports.WebExtensionLedgerError = exports.WebExtensionTxUnspecifiedError = exports.WebExtensionTxFailed = exports.WebExtensionCreateTxFailed = exports.WebExtensionUserDenied = void 0;
class WebExtensionUserDenied extends Error {
    constructor() {
        super('User Denied');
        this.toString = () => {
            return `[${this.name}]`;
        };
        this.toJSON = () => {
            return {
                name: this.name,
            };
        };
        this.name = 'WebExtensionUserDenied';
    }
}
exports.WebExtensionUserDenied = WebExtensionUserDenied;
class WebExtensionCreateTxFailed extends Error {
    constructor(message) {
        super(message);
        this.toString = () => {
            return `[${this.name} message="${this.message}"]`;
        };
        this.toJSON = () => {
            return {
                name: this.name,
                message: this.message,
            };
        };
        this.name = 'WebExtensionCreateTxFailed';
    }
}
exports.WebExtensionCreateTxFailed = WebExtensionCreateTxFailed;
class WebExtensionTxFailed extends Error {
    constructor(txhash, message, raw_message) {
        super(message);
        this.txhash = txhash;
        this.raw_message = raw_message;
        this.toString = () => {
            return `[${this.name} txhash="${this.txhash}" message="${this.message}"]\n${JSON.stringify(this.raw_message, null, 2)}`;
        };
        this.toJSON = () => {
            return {
                name: this.name,
                txhash: this.txhash,
                message: this.message,
                raw_message: this.raw_message,
            };
        };
        this.name = 'WebExtensionTxFailed';
    }
}
exports.WebExtensionTxFailed = WebExtensionTxFailed;
class WebExtensionTxUnspecifiedError extends Error {
    constructor(message) {
        super(message);
        this.toString = () => {
            return `[${this.name} message="${this.message}"]`;
        };
        this.toJSON = () => {
            return {
                name: this.name,
                message: this.message,
            };
        };
        this.name = 'WebExtensionTxUnspecifiedError';
    }
}
exports.WebExtensionTxUnspecifiedError = WebExtensionTxUnspecifiedError;
class WebExtensionLedgerError extends Error {
    constructor(code, message) {
        super(message);
        this.code = code;
        this.toString = () => {
            return `[${this.name} code="${this.code}" message="${this.message}"]`;
        };
        this.toJSON = () => {
            return {
                name: this.name,
                code: this.code,
                message: this.message,
            };
        };
        this.name = 'WebExtensionLedgerError';
    }
}
exports.WebExtensionLedgerError = WebExtensionLedgerError;
// ---------------------------------------------
// functions
// ---------------------------------------------
function isWebExtensionError(error) {
    return (error instanceof WebExtensionUserDenied ||
        error instanceof WebExtensionCreateTxFailed ||
        error instanceof WebExtensionTxFailed ||
        error instanceof WebExtensionLedgerError ||
        error instanceof WebExtensionTxUnspecifiedError);
}
exports.isWebExtensionError = isWebExtensionError;
function createTxErrorFromJson(json) {
    switch (json.name) {
        case 'WebExtensionUserDenied':
            return new WebExtensionUserDenied();
        case 'WebExtensionCreateTxFailed':
            return new WebExtensionCreateTxFailed(json.message);
        case 'WebExtensionLedgerError':
            return new WebExtensionLedgerError(json.code, json.message);
        case 'WebExtensionTxFailed':
            return new WebExtensionTxFailed(json.txhash, json.message, json.raw_message);
        default:
            return new WebExtensionTxUnspecifiedError('message' in json ? json.message : String(json));
    }
}
exports.createTxErrorFromJson = createTxErrorFromJson;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXJyb3JzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL0B0ZXJyYS1kZXYvd2ViLWV4dGVuc2lvbi1pbnRlcmZhY2UvZXJyb3JzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLE1BQWEsc0JBQXVCLFNBQVEsS0FBSztJQUMvQztRQUNFLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUl2QixhQUFRLEdBQUcsR0FBRyxFQUFFO1lBQ2QsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQztRQUMxQixDQUFDLENBQUM7UUFFRixXQUFNLEdBQUcsR0FBRyxFQUFFO1lBQ1osT0FBTztnQkFDTCxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7YUFDaEIsQ0FBQztRQUNKLENBQUMsQ0FBQztRQVhBLElBQUksQ0FBQyxJQUFJLEdBQUcsd0JBQXdCLENBQUM7SUFDdkMsQ0FBQztDQVdGO0FBZkQsd0RBZUM7QUFFRCxNQUFhLDBCQUEyQixTQUFRLEtBQUs7SUFDbkQsWUFBWSxPQUFlO1FBQ3pCLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUlqQixhQUFRLEdBQUcsR0FBRyxFQUFFO1lBQ2QsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLGFBQWEsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDO1FBQ3BELENBQUMsQ0FBQztRQUVGLFdBQU0sR0FBRyxHQUFHLEVBQUU7WUFDWixPQUFPO2dCQUNMLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtnQkFDZixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87YUFDdEIsQ0FBQztRQUNKLENBQUMsQ0FBQztRQVpBLElBQUksQ0FBQyxJQUFJLEdBQUcsNEJBQTRCLENBQUM7SUFDM0MsQ0FBQztDQVlGO0FBaEJELGdFQWdCQztBQUVELE1BQWEsb0JBQXFCLFNBQVEsS0FBSztJQUM3QyxZQUNrQixNQUEwQixFQUMxQyxPQUFlLEVBQ0MsV0FBZ0I7UUFFaEMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBSkMsV0FBTSxHQUFOLE1BQU0sQ0FBb0I7UUFFMUIsZ0JBQVcsR0FBWCxXQUFXLENBQUs7UUFNbEMsYUFBUSxHQUFHLEdBQUcsRUFBRTtZQUNkLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxZQUFZLElBQUksQ0FBQyxNQUFNLGNBQ3pDLElBQUksQ0FBQyxPQUNQLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3JELENBQUMsQ0FBQztRQUVGLFdBQU0sR0FBRyxHQUFHLEVBQUU7WUFDWixPQUFPO2dCQUNMLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtnQkFDZixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07Z0JBQ25CLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztnQkFDckIsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXO2FBQzlCLENBQUM7UUFDSixDQUFDLENBQUM7UUFoQkEsSUFBSSxDQUFDLElBQUksR0FBRyxzQkFBc0IsQ0FBQztJQUNyQyxDQUFDO0NBZ0JGO0FBeEJELG9EQXdCQztBQUVELE1BQWEsOEJBQStCLFNBQVEsS0FBSztJQUN2RCxZQUFZLE9BQWU7UUFDekIsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBSWpCLGFBQVEsR0FBRyxHQUFHLEVBQUU7WUFDZCxPQUFPLElBQUksSUFBSSxDQUFDLElBQUksYUFBYSxJQUFJLENBQUMsT0FBTyxJQUFJLENBQUM7UUFDcEQsQ0FBQyxDQUFDO1FBRUYsV0FBTSxHQUFHLEdBQUcsRUFBRTtZQUNaLE9BQU87Z0JBQ0wsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2dCQUNmLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTzthQUN0QixDQUFDO1FBQ0osQ0FBQyxDQUFDO1FBWkEsSUFBSSxDQUFDLElBQUksR0FBRyxnQ0FBZ0MsQ0FBQztJQUMvQyxDQUFDO0NBWUY7QUFoQkQsd0VBZ0JDO0FBRUQsTUFBYSx1QkFBd0IsU0FBUSxLQUFLO0lBQ2hELFlBQTRCLElBQVksRUFBRSxPQUFlO1FBQ3ZELEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQURXLFNBQUksR0FBSixJQUFJLENBQVE7UUFLeEMsYUFBUSxHQUFHLEdBQUcsRUFBRTtZQUNkLE9BQU8sSUFBSSxJQUFJLENBQUMsSUFBSSxVQUFVLElBQUksQ0FBQyxJQUFJLGNBQWMsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDO1FBQ3hFLENBQUMsQ0FBQztRQUVGLFdBQU0sR0FBRyxHQUFHLEVBQUU7WUFDWixPQUFPO2dCQUNMLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtnQkFDZixJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUk7Z0JBQ2YsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPO2FBQ3RCLENBQUM7UUFDSixDQUFDLENBQUM7UUFiQSxJQUFJLENBQUMsSUFBSSxHQUFHLHlCQUF5QixDQUFDO0lBQ3hDLENBQUM7Q0FhRjtBQWpCRCwwREFpQkM7QUFFRCxnREFBZ0Q7QUFDaEQsWUFBWTtBQUNaLGdEQUFnRDtBQUNoRCxTQUFnQixtQkFBbUIsQ0FBQyxLQUFjO0lBQ2hELE9BQU8sQ0FDTCxLQUFLLFlBQVksc0JBQXNCO1FBQ3ZDLEtBQUssWUFBWSwwQkFBMEI7UUFDM0MsS0FBSyxZQUFZLG9CQUFvQjtRQUNyQyxLQUFLLFlBQVksdUJBQXVCO1FBQ3hDLEtBQUssWUFBWSw4QkFBOEIsQ0FDaEQsQ0FBQztBQUNKLENBQUM7QUFSRCxrREFRQztBQUVELFNBQWdCLHFCQUFxQixDQUNuQyxJQUFTO0lBT1QsUUFBUSxJQUFJLENBQUMsSUFBSSxFQUFFO1FBQ2pCLEtBQUssd0JBQXdCO1lBQzNCLE9BQU8sSUFBSSxzQkFBc0IsRUFBRSxDQUFDO1FBQ3RDLEtBQUssNEJBQTRCO1lBQy9CLE9BQU8sSUFBSSwwQkFBMEIsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdEQsS0FBSyx5QkFBeUI7WUFDNUIsT0FBTyxJQUFJLHVCQUF1QixDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzlELEtBQUssc0JBQXNCO1lBQ3pCLE9BQU8sSUFBSSxvQkFBb0IsQ0FDN0IsSUFBSSxDQUFDLE1BQU0sRUFDWCxJQUFJLENBQUMsT0FBTyxFQUNaLElBQUksQ0FBQyxXQUFXLENBQ2pCLENBQUM7UUFDSjtZQUNFLE9BQU8sSUFBSSw4QkFBOEIsQ0FDdkMsU0FBUyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUNoRCxDQUFDO0tBQ0w7QUFDSCxDQUFDO0FBMUJELHNEQTBCQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBXZWJFeHRlbnNpb25Vc2VyRGVuaWVkIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignVXNlciBEZW5pZWQnKTtcbiAgICB0aGlzLm5hbWUgPSAnV2ViRXh0ZW5zaW9uVXNlckRlbmllZCc7XG4gIH1cblxuICB0b1N0cmluZyA9ICgpID0+IHtcbiAgICByZXR1cm4gYFske3RoaXMubmFtZX1dYDtcbiAgfTtcblxuICB0b0pTT04gPSAoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICB9O1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgV2ViRXh0ZW5zaW9uQ3JlYXRlVHhGYWlsZWQgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdXZWJFeHRlbnNpb25DcmVhdGVUeEZhaWxlZCc7XG4gIH1cblxuICB0b1N0cmluZyA9ICgpID0+IHtcbiAgICByZXR1cm4gYFske3RoaXMubmFtZX0gbWVzc2FnZT1cIiR7dGhpcy5tZXNzYWdlfVwiXWA7XG4gIH07XG5cbiAgdG9KU09OID0gKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIFdlYkV4dGVuc2lvblR4RmFpbGVkIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgdHhoYXNoOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIHB1YmxpYyByZWFkb25seSByYXdfbWVzc2FnZTogYW55LFxuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnV2ViRXh0ZW5zaW9uVHhGYWlsZWQnO1xuICB9XG5cbiAgdG9TdHJpbmcgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGBbJHt0aGlzLm5hbWV9IHR4aGFzaD1cIiR7dGhpcy50eGhhc2h9XCIgbWVzc2FnZT1cIiR7XG4gICAgICB0aGlzLm1lc3NhZ2VcbiAgICB9XCJdXFxuJHtKU09OLnN0cmluZ2lmeSh0aGlzLnJhd19tZXNzYWdlLCBudWxsLCAyKX1gO1xuICB9O1xuXG4gIHRvSlNPTiA9ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgdHhoYXNoOiB0aGlzLnR4aGFzaCxcbiAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcbiAgICAgIHJhd19tZXNzYWdlOiB0aGlzLnJhd19tZXNzYWdlLFxuICAgIH07XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBXZWJFeHRlbnNpb25UeFVuc3BlY2lmaWVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9ICdXZWJFeHRlbnNpb25UeFVuc3BlY2lmaWVkRXJyb3InO1xuICB9XG5cbiAgdG9TdHJpbmcgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGBbJHt0aGlzLm5hbWV9IG1lc3NhZ2U9XCIke3RoaXMubWVzc2FnZX1cIl1gO1xuICB9O1xuXG4gIHRvSlNPTiA9ICgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgIH07XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBXZWJFeHRlbnNpb25MZWRnZXJFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IGNvZGU6IG51bWJlciwgbWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5uYW1lID0gJ1dlYkV4dGVuc2lvbkxlZGdlckVycm9yJztcbiAgfVxuXG4gIHRvU3RyaW5nID0gKCkgPT4ge1xuICAgIHJldHVybiBgWyR7dGhpcy5uYW1lfSBjb2RlPVwiJHt0aGlzLmNvZGV9XCIgbWVzc2FnZT1cIiR7dGhpcy5tZXNzYWdlfVwiXWA7XG4gIH07XG5cbiAgdG9KU09OID0gKCkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICBjb2RlOiB0aGlzLmNvZGUsXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgfTtcbiAgfTtcbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBmdW5jdGlvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0IGZ1bmN0aW9uIGlzV2ViRXh0ZW5zaW9uRXJyb3IoZXJyb3I6IHVua25vd24pOiBib29sZWFuIHtcbiAgcmV0dXJuIChcbiAgICBlcnJvciBpbnN0YW5jZW9mIFdlYkV4dGVuc2lvblVzZXJEZW5pZWQgfHxcbiAgICBlcnJvciBpbnN0YW5jZW9mIFdlYkV4dGVuc2lvbkNyZWF0ZVR4RmFpbGVkIHx8XG4gICAgZXJyb3IgaW5zdGFuY2VvZiBXZWJFeHRlbnNpb25UeEZhaWxlZCB8fFxuICAgIGVycm9yIGluc3RhbmNlb2YgV2ViRXh0ZW5zaW9uTGVkZ2VyRXJyb3IgfHxcbiAgICBlcnJvciBpbnN0YW5jZW9mIFdlYkV4dGVuc2lvblR4VW5zcGVjaWZpZWRFcnJvclxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHhFcnJvckZyb21Kc29uKFxuICBqc29uOiBhbnksXG4pOlxuICB8IFdlYkV4dGVuc2lvblVzZXJEZW5pZWRcbiAgfCBXZWJFeHRlbnNpb25DcmVhdGVUeEZhaWxlZFxuICB8IFdlYkV4dGVuc2lvblR4RmFpbGVkXG4gIHwgV2ViRXh0ZW5zaW9uTGVkZ2VyRXJyb3JcbiAgfCBXZWJFeHRlbnNpb25UeFVuc3BlY2lmaWVkRXJyb3Ige1xuICBzd2l0Y2ggKGpzb24ubmFtZSkge1xuICAgIGNhc2UgJ1dlYkV4dGVuc2lvblVzZXJEZW5pZWQnOlxuICAgICAgcmV0dXJuIG5ldyBXZWJFeHRlbnNpb25Vc2VyRGVuaWVkKCk7XG4gICAgY2FzZSAnV2ViRXh0ZW5zaW9uQ3JlYXRlVHhGYWlsZWQnOlxuICAgICAgcmV0dXJuIG5ldyBXZWJFeHRlbnNpb25DcmVhdGVUeEZhaWxlZChqc29uLm1lc3NhZ2UpO1xuICAgIGNhc2UgJ1dlYkV4dGVuc2lvbkxlZGdlckVycm9yJzpcbiAgICAgIHJldHVybiBuZXcgV2ViRXh0ZW5zaW9uTGVkZ2VyRXJyb3IoanNvbi5jb2RlLCBqc29uLm1lc3NhZ2UpO1xuICAgIGNhc2UgJ1dlYkV4dGVuc2lvblR4RmFpbGVkJzpcbiAgICAgIHJldHVybiBuZXcgV2ViRXh0ZW5zaW9uVHhGYWlsZWQoXG4gICAgICAgIGpzb24udHhoYXNoLFxuICAgICAgICBqc29uLm1lc3NhZ2UsXG4gICAgICAgIGpzb24ucmF3X21lc3NhZ2UsXG4gICAgICApO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbmV3IFdlYkV4dGVuc2lvblR4VW5zcGVjaWZpZWRFcnJvcihcbiAgICAgICAgJ21lc3NhZ2UnIGluIGpzb24gPyBqc29uLm1lc3NhZ2UgOiBTdHJpbmcoanNvbiksXG4gICAgICApO1xuICB9XG59XG4iXX0=