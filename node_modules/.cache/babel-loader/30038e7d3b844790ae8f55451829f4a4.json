{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { WalletContext, WalletStatus } from '@terra-money/use-wallet';\nimport { useEffect, useMemo, useState } from 'react';\nimport { WalletController } from '../controller';\nconst EMPTY_ARRAY = [];\nconst EMPTY_SUPPORT_FEATURES = new Set();\nexport function WalletProvider(_ref) {\n  let {\n    children,\n    defaultNetwork,\n    walletConnectChainIds,\n    connectorOpts,\n    pushServerOpts,\n    createReadonlyWalletSession,\n    selectExtension,\n    waitingChromeExtensionInstallCheck,\n    dangerously__chromeExtensionCompatibleBrowserCheck\n  } = _ref;\n  const [controller] = useState(() => new WalletController({\n    defaultNetwork,\n    walletConnectChainIds,\n    connectorOpts,\n    pushServerOpts,\n    createReadonlyWalletSession,\n    selectExtension,\n    waitingChromeExtensionInstallCheck,\n    dangerously__chromeExtensionCompatibleBrowserCheck\n  }));\n  const [availableConnectTypes, setAvailableConnectTypes] = useState(() => []);\n  const [availableInstallTypes, setAvailableInstallTypes] = useState(() => []);\n  const [availableConnections, setAvailableConnections] = useState(() => []);\n  const [states, setStates] = useState(() => ({\n    status: WalletStatus.INITIALIZING,\n    network: defaultNetwork\n  }));\n  useEffect(() => {\n    const availableConnectTypesSubscription = controller.availableConnectTypes().subscribe({\n      next: value => {\n        setAvailableConnectTypes(value);\n      }\n    });\n    const availableInstallTypesSubscription = controller.availableInstallTypes().subscribe({\n      next: value => {\n        setAvailableInstallTypes(value);\n      }\n    });\n    const availableConnectionsSubscription = controller.availableConnections().subscribe({\n      next: value => {\n        setAvailableConnections(value);\n      }\n    });\n    const statesSubscription = controller.states().subscribe({\n      next: value => {\n        setStates(value);\n      }\n    });\n    return () => {\n      availableConnectTypesSubscription.unsubscribe();\n      availableInstallTypesSubscription.unsubscribe();\n      availableConnectionsSubscription.unsubscribe();\n      statesSubscription.unsubscribe();\n    };\n  }, [controller]);\n  const state = useMemo(() => {\n    return {\n      availableConnectTypes,\n      availableInstallTypes,\n      availableConnections,\n      status: states.status,\n      network: states.network,\n      wallets: states.status === WalletStatus.WALLET_CONNECTED ? states.wallets : EMPTY_ARRAY,\n      install: controller.install,\n      connect: controller.connect,\n      connectReadonly: controller.connectReadonly,\n      disconnect: controller.disconnect,\n      supportFeatures: states.status === WalletStatus.WALLET_CONNECTED ? states.supportFeatures : EMPTY_SUPPORT_FEATURES,\n      post: controller.post,\n      sign: controller.sign,\n      signBytes: controller.signBytes,\n      hasCW20Tokens: controller.hasCW20Tokens,\n      addCW20Tokens: controller.addCW20Tokens,\n      hasNetwork: controller.hasNetwork,\n      addNetwork: controller.addNetwork,\n      refetchStates: controller.refetchStates,\n      recheckStatus: controller.refetchStates,\n      isChromeExtensionCompatibleBrowser: controller.isChromeExtensionCompatibleBrowser\n    };\n  }, [availableConnectTypes, availableInstallTypes, availableConnections, controller, states]);\n  return _jsx(WalletContext.Provider, Object.assign({\n    value: state\n  }, {\n    children: children\n  }), void 0);\n}","map":{"version":3,"sources":["../../../../src/@terra-money/wallet-provider/impl-react/WalletProvider.tsx"],"names":[],"mappings":"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","sourcesContent":["import { TerraWebExtensionFeatures } from '@terra-dev/web-extension-interface';\nimport {\n  Connection,\n  ConnectType,\n  Wallet,\n  WalletContext,\n  WalletInfo,\n  WalletStates,\n  WalletStatus,\n} from '@terra-money/use-wallet';\nimport React, { ReactNode, useEffect, useMemo, useState } from 'react';\nimport { WalletController, WalletControllerOptions } from '../controller';\n\nexport interface WalletProviderProps extends WalletControllerOptions {\n  children: ReactNode;\n}\n\nconst EMPTY_ARRAY: WalletInfo[] = [];\nconst EMPTY_SUPPORT_FEATURES = new Set<TerraWebExtensionFeatures>();\n\nexport function WalletProvider({\n  children,\n  defaultNetwork,\n  walletConnectChainIds,\n  connectorOpts,\n  pushServerOpts,\n  createReadonlyWalletSession,\n  selectExtension,\n  waitingChromeExtensionInstallCheck,\n  dangerously__chromeExtensionCompatibleBrowserCheck,\n}: WalletProviderProps) {\n  const [controller] = useState<WalletController>(\n    () =>\n      new WalletController({\n        defaultNetwork,\n        walletConnectChainIds,\n        connectorOpts,\n        pushServerOpts,\n        createReadonlyWalletSession,\n        selectExtension,\n        waitingChromeExtensionInstallCheck,\n        dangerously__chromeExtensionCompatibleBrowserCheck,\n      }),\n  );\n\n  const [availableConnectTypes, setAvailableConnectTypes] = useState<\n    ConnectType[]\n  >(() => []);\n\n  const [availableInstallTypes, setAvailableInstallTypes] = useState<\n    ConnectType[]\n  >(() => []);\n\n  const [availableConnections, setAvailableConnections] = useState<\n    Connection[]\n  >(() => []);\n\n  const [states, setStates] = useState<WalletStates>(() => ({\n    status: WalletStatus.INITIALIZING,\n    network: defaultNetwork,\n  }));\n\n  useEffect(() => {\n    const availableConnectTypesSubscription = controller\n      .availableConnectTypes()\n      .subscribe({\n        next: (value) => {\n          setAvailableConnectTypes(value);\n        },\n      });\n\n    const availableInstallTypesSubscription = controller\n      .availableInstallTypes()\n      .subscribe({\n        next: (value) => {\n          setAvailableInstallTypes(value);\n        },\n      });\n\n    const availableConnectionsSubscription = controller\n      .availableConnections()\n      .subscribe({\n        next: (value) => {\n          setAvailableConnections(value);\n        },\n      });\n\n    const statesSubscription = controller.states().subscribe({\n      next: (value) => {\n        setStates(value);\n      },\n    });\n\n    return () => {\n      availableConnectTypesSubscription.unsubscribe();\n      availableInstallTypesSubscription.unsubscribe();\n      availableConnectionsSubscription.unsubscribe();\n      statesSubscription.unsubscribe();\n    };\n  }, [controller]);\n\n  const state = useMemo<Wallet>(() => {\n    return {\n      availableConnectTypes,\n      availableInstallTypes,\n      availableConnections,\n      status: states.status,\n      network: states.network,\n      wallets:\n        states.status === WalletStatus.WALLET_CONNECTED\n          ? states.wallets\n          : EMPTY_ARRAY,\n      install: controller.install,\n      connect: controller.connect,\n      connectReadonly: controller.connectReadonly,\n      disconnect: controller.disconnect,\n      supportFeatures:\n        states.status === WalletStatus.WALLET_CONNECTED\n          ? states.supportFeatures\n          : EMPTY_SUPPORT_FEATURES,\n      post: controller.post,\n      sign: controller.sign,\n      signBytes: controller.signBytes,\n      hasCW20Tokens: controller.hasCW20Tokens,\n      addCW20Tokens: controller.addCW20Tokens,\n      hasNetwork: controller.hasNetwork,\n      addNetwork: controller.addNetwork,\n      refetchStates: controller.refetchStates,\n      recheckStatus: controller.refetchStates,\n      isChromeExtensionCompatibleBrowser:\n        controller.isChromeExtensionCompatibleBrowser,\n    };\n  }, [\n    availableConnectTypes,\n    availableInstallTypes,\n    availableConnections,\n    controller,\n    states,\n  ]);\n\n  return (\n    <WalletContext.Provider value={state}>{children}</WalletContext.Provider>\n  );\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}