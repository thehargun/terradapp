{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Packet = void 0;\n\nvar channel_1 = require(\"@terra-money/terra.proto/ibc/core/channel/v1/channel\");\n\nvar long_1 = __importDefault(require(\"long\"));\n\nvar json_1 = require(\"../../../../util/json\");\n\nvar Height_1 = require(\"../client/Height\");\n/** Packet defines a type that carries data across different chains through IBC */\n\n\nvar Packet =\n/** @class */\nfunction (_super) {\n  __extends(Packet, _super);\n  /**\n   * @param port_id port on the counterparty chain which owns the other end of the channel.\n   * @param channel_id channel end on the counterparty chain\n   */\n\n\n  function Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height, timeout_timestamp) {\n    var _this = _super.call(this) || this;\n\n    _this.sequence = sequence;\n    _this.source_port = source_port;\n    _this.source_channel = source_channel;\n    _this.destination_port = destination_port;\n    _this.destination_channel = destination_channel;\n    _this.data = data;\n    _this.timeout_height = timeout_height;\n    _this.timeout_timestamp = timeout_timestamp;\n    return _this;\n  }\n\n  Packet.fromAmino = function (_data) {\n    var sequence = _data.sequence,\n        source_port = _data.source_port,\n        source_channel = _data.source_channel,\n        destination_port = _data.destination_port,\n        destination_channel = _data.destination_channel,\n        data = _data.data,\n        timeout_height = _data.timeout_height,\n        timeout_timestamp = _data.timeout_timestamp;\n    return new Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height ? Height_1.Height.fromAmino(timeout_height) : undefined, timeout_timestamp);\n  };\n\n  Packet.prototype.toAmino = function () {\n    var _a = this,\n        sequence = _a.sequence,\n        source_port = _a.source_port,\n        source_channel = _a.source_channel,\n        destination_port = _a.destination_port,\n        destination_channel = _a.destination_channel,\n        data = _a.data,\n        timeout_height = _a.timeout_height,\n        timeout_timestamp = _a.timeout_timestamp;\n\n    var res = {\n      sequence: sequence,\n      source_port: source_port,\n      source_channel: source_channel,\n      destination_port: destination_port,\n      destination_channel: destination_channel,\n      data: data,\n      timeout_height: timeout_height ? timeout_height.toAmino() : undefined,\n      timeout_timestamp: timeout_timestamp\n    };\n    return res;\n  };\n\n  Packet.fromData = function (_data) {\n    var sequence = _data.sequence,\n        source_port = _data.source_port,\n        source_channel = _data.source_channel,\n        destination_port = _data.destination_port,\n        destination_channel = _data.destination_channel,\n        data = _data.data,\n        timeout_height = _data.timeout_height,\n        timeout_timestamp = _data.timeout_timestamp;\n    return new Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height ? Height_1.Height.fromData(timeout_height) : undefined, Number.parseInt(timeout_timestamp));\n  };\n\n  Packet.prototype.toData = function () {\n    var _a = this,\n        sequence = _a.sequence,\n        source_port = _a.source_port,\n        source_channel = _a.source_channel,\n        destination_port = _a.destination_port,\n        destination_channel = _a.destination_channel,\n        data = _a.data,\n        timeout_height = _a.timeout_height,\n        timeout_timestamp = _a.timeout_timestamp;\n\n    var res = {\n      sequence: sequence,\n      source_port: source_port,\n      source_channel: source_channel,\n      destination_port: destination_port,\n      destination_channel: destination_channel,\n      data: data,\n      timeout_height: timeout_height ? timeout_height.toData() : undefined,\n      timeout_timestamp: timeout_timestamp.toFixed()\n    };\n    return res;\n  };\n\n  Packet.fromProto = function (proto) {\n    return new Packet(proto.sequence.toNumber(), proto.sourcePort, proto.sourceChannel, proto.destinationPort, proto.destinationChannel, Buffer.from(proto.data).toString('base64'), proto.timeoutHeight ? Height_1.Height.fromProto(proto.timeoutHeight) : undefined, proto.timeoutTimestamp.toNumber());\n  };\n\n  Packet.prototype.toProto = function () {\n    var _a = this,\n        sequence = _a.sequence,\n        source_port = _a.source_port,\n        source_channel = _a.source_channel,\n        destination_port = _a.destination_port,\n        destination_channel = _a.destination_channel,\n        data = _a.data,\n        timeout_height = _a.timeout_height,\n        timeout_timestamp = _a.timeout_timestamp;\n\n    return channel_1.Packet.fromPartial({\n      sequence: long_1.default.fromNumber(sequence),\n      sourcePort: source_port,\n      sourceChannel: source_channel,\n      destinationPort: destination_port,\n      destinationChannel: destination_channel,\n      data: Buffer.from(data, 'base64'),\n      timeoutHeight: timeout_height ? timeout_height.toProto() : undefined,\n      timeoutTimestamp: long_1.default.fromNumber(timeout_timestamp)\n    });\n  };\n\n  return Packet;\n}(json_1.JSONSerializable);\n\nexports.Packet = Packet;","map":{"version":3,"sources":["../../../../../src/core/ibc/msgs/channel/Packet.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Packet = void 0;\nvar channel_1 = require(\"@terra-money/terra.proto/ibc/core/channel/v1/channel\");\nvar long_1 = __importDefault(require(\"long\"));\nvar json_1 = require(\"../../../../util/json\");\nvar Height_1 = require(\"../client/Height\");\n/** Packet defines a type that carries data across different chains through IBC */\nvar Packet = /** @class */ (function (_super) {\n    __extends(Packet, _super);\n    /**\n     * @param port_id port on the counterparty chain which owns the other end of the channel.\n     * @param channel_id channel end on the counterparty chain\n     */\n    function Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height, timeout_timestamp) {\n        var _this = _super.call(this) || this;\n        _this.sequence = sequence;\n        _this.source_port = source_port;\n        _this.source_channel = source_channel;\n        _this.destination_port = destination_port;\n        _this.destination_channel = destination_channel;\n        _this.data = data;\n        _this.timeout_height = timeout_height;\n        _this.timeout_timestamp = timeout_timestamp;\n        return _this;\n    }\n    Packet.fromAmino = function (_data) {\n        var sequence = _data.sequence, source_port = _data.source_port, source_channel = _data.source_channel, destination_port = _data.destination_port, destination_channel = _data.destination_channel, data = _data.data, timeout_height = _data.timeout_height, timeout_timestamp = _data.timeout_timestamp;\n        return new Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height ? Height_1.Height.fromAmino(timeout_height) : undefined, timeout_timestamp);\n    };\n    Packet.prototype.toAmino = function () {\n        var _a = this, sequence = _a.sequence, source_port = _a.source_port, source_channel = _a.source_channel, destination_port = _a.destination_port, destination_channel = _a.destination_channel, data = _a.data, timeout_height = _a.timeout_height, timeout_timestamp = _a.timeout_timestamp;\n        var res = {\n            sequence: sequence,\n            source_port: source_port,\n            source_channel: source_channel,\n            destination_port: destination_port,\n            destination_channel: destination_channel,\n            data: data,\n            timeout_height: timeout_height ? timeout_height.toAmino() : undefined,\n            timeout_timestamp: timeout_timestamp,\n        };\n        return res;\n    };\n    Packet.fromData = function (_data) {\n        var sequence = _data.sequence, source_port = _data.source_port, source_channel = _data.source_channel, destination_port = _data.destination_port, destination_channel = _data.destination_channel, data = _data.data, timeout_height = _data.timeout_height, timeout_timestamp = _data.timeout_timestamp;\n        return new Packet(sequence, source_port, source_channel, destination_port, destination_channel, data, timeout_height ? Height_1.Height.fromData(timeout_height) : undefined, Number.parseInt(timeout_timestamp));\n    };\n    Packet.prototype.toData = function () {\n        var _a = this, sequence = _a.sequence, source_port = _a.source_port, source_channel = _a.source_channel, destination_port = _a.destination_port, destination_channel = _a.destination_channel, data = _a.data, timeout_height = _a.timeout_height, timeout_timestamp = _a.timeout_timestamp;\n        var res = {\n            sequence: sequence,\n            source_port: source_port,\n            source_channel: source_channel,\n            destination_port: destination_port,\n            destination_channel: destination_channel,\n            data: data,\n            timeout_height: timeout_height ? timeout_height.toData() : undefined,\n            timeout_timestamp: timeout_timestamp.toFixed(),\n        };\n        return res;\n    };\n    Packet.fromProto = function (proto) {\n        return new Packet(proto.sequence.toNumber(), proto.sourcePort, proto.sourceChannel, proto.destinationPort, proto.destinationChannel, Buffer.from(proto.data).toString('base64'), proto.timeoutHeight ? Height_1.Height.fromProto(proto.timeoutHeight) : undefined, proto.timeoutTimestamp.toNumber());\n    };\n    Packet.prototype.toProto = function () {\n        var _a = this, sequence = _a.sequence, source_port = _a.source_port, source_channel = _a.source_channel, destination_port = _a.destination_port, destination_channel = _a.destination_channel, data = _a.data, timeout_height = _a.timeout_height, timeout_timestamp = _a.timeout_timestamp;\n        return channel_1.Packet.fromPartial({\n            sequence: long_1.default.fromNumber(sequence),\n            sourcePort: source_port,\n            sourceChannel: source_channel,\n            destinationPort: destination_port,\n            destinationChannel: destination_channel,\n            data: Buffer.from(data, 'base64'),\n            timeoutHeight: timeout_height ? timeout_height.toProto() : undefined,\n            timeoutTimestamp: long_1.default.fromNumber(timeout_timestamp),\n        });\n    };\n    return Packet;\n}(json_1.JSONSerializable));\nexports.Packet = Packet;\n//# sourceMappingURL=Packet.js.map"]},"metadata":{},"sourceType":"script"}