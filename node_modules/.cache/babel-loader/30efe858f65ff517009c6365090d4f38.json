{"ast":null,"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport QRCode from 'qrcode.react';\nimport { createElement, useCallback, useMemo } from 'react';\nimport { render } from 'react-dom';\nimport styled, { keyframes } from 'styled-components';\nimport { isMobile as isMobileBrowser } from '../../utils/browser-check';\nexport class TerraWalletconnectQrcodeModal {\n  constructor() {\n    this.modalContainer = null;\n    this.callback = null;\n\n    this.setCloseCallback = callback => {\n      this.callback = callback;\n    };\n\n    this.open = (uri, cb, _qrcodeModalOptions) => {\n      var _a;\n\n      const modalContainer = window.document.createElement('div');\n      const query = encodeURIComponent(`action=wallet_connect&payload=${encodeURIComponent(uri)}`);\n      const schemeUri = `https://terrastation.page.link/?link=https://terra.money?${query}&apn=money.terra.station&ibi=money.terra.station&isi=1548434735`;\n      const modal = createElement(TerraQRCodeModal, {\n        schemeUri,\n        onClose: () => {\n          if (this.callback) {\n            this.callback();\n            this.callback = null;\n          }\n\n          this.close();\n        }\n      });\n\n      if (isMobileBrowser()) {\n        window.location.href = schemeUri;\n      }\n\n      render(modal, modalContainer);\n      (_a = window.document.querySelector('body')) === null || _a === void 0 ? void 0 : _a.appendChild(modalContainer);\n      this.modalContainer = modalContainer;\n    };\n\n    this.close = () => {\n      var _a;\n\n      if (this.modalContainer) {\n        (_a = this.modalContainer.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(this.modalContainer);\n      }\n\n      this.callback = null;\n    };\n  }\n\n}\n\nfunction TerraQRCodeModalBase(_ref) {\n  let {\n    schemeUri,\n    className,\n    onClose\n  } = _ref;\n  const isMobile = useMemo(() => isMobileBrowser(), []);\n  const openTerraStationMobile = useCallback(() => {\n    window.location.href = schemeUri;\n  }, [schemeUri]);\n  return _jsxs(\"div\", Object.assign({\n    className: className\n  }, {\n    children: [_jsx(\"div\", {\n      onClick: onClose\n    }, void 0), isMobile ? _jsxs(\"section\", Object.assign({\n      className: \"mobile\"\n    }, {\n      children: [_jsx(\"h1\", {\n        children: \"Wallet Connect\"\n      }, void 0), _jsx(\"button\", Object.assign({\n        onClick: openTerraStationMobile,\n        className: \"flat-button\"\n      }, {\n        children: \"Open Terra Station Mobile\"\n      }), void 0)]\n    }), void 0) : _jsxs(\"section\", Object.assign({\n      className: \"desktop\"\n    }, {\n      children: [_jsx(\"h1\", {\n        children: \"Wallet Connect\"\n      }, void 0), _jsx(QRCode, {\n        value: schemeUri,\n        size: 240\n      }, void 0)]\n    }), void 0)]\n  }), void 0);\n}\n\nconst modalEnter = keyframes`\n  0% {\n    opacity: 0;\n  }\n  \n  100% {\n    opacity: 1;\n  }\n`;\nconst sectionEnter = keyframes`\n  0% {\n    opacity: 0;\n    transform: scale(0.4);\n  }\n  \n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n`;\nconst TerraQRCodeModal = styled(TerraQRCodeModalBase)`\n  position: fixed;\n  z-index: 100000;\n\n  color: #000000;\n\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n\n  display: grid;\n  place-content: center;\n\n  > div {\n    position: fixed;\n    z-index: -1;\n\n    left: 0;\n    top: 0;\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, 0.3);\n\n    animation: ${modalEnter} 0.2s ease-in-out;\n  }\n\n  > section {\n    border-radius: 25px;\n\n    background-color: #ffffff;\n    box-shadow: 0 4px 18px 3px rgba(0, 0, 0, 0.43);\n\n    animation: ${sectionEnter} 0.2s ease-in-out;\n\n    button {\n      cursor: pointer;\n\n      display: block;\n      outline: none;\n      background-color: transparent;\n      width: 100%;\n      height: 32px;\n      font-size: 13px;\n      letter-spacing: -0.2px;\n      border-radius: 18px;\n      border: solid 1px #2c2c2c;\n\n      &.flat-button {\n        border: 0;\n        color: #ffffff;\n        background-color: #2c2c2c;\n      }\n    }\n\n    .separator {\n      height: 12px;\n\n      position: relative;\n\n      hr {\n        position: absolute;\n        top: 5px;\n        left: 0;\n        right: 0;\n\n        border: 0;\n        border-bottom: 1px dashed #cccccc;\n      }\n\n      span {\n        display: block;\n\n        position: absolute;\n        top: -4px;\n        left: 50%;\n        transform: translateX(-50%);\n\n        font-size: 12px;\n        color: #c2c2c2;\n        background-color: #ffffff;\n        padding: 0 2px;\n      }\n    }\n\n    &.desktop {\n      padding: 50px 60px;\n\n      h1 {\n        font-size: 27px;\n        font-weight: 500;\n\n        text-align: center;\n\n        margin-bottom: 24px;\n      }\n\n      button {\n        margin-top: 20px;\n      }\n    }\n\n    &.mobile {\n      padding: 40px 30px;\n      min-width: 320px;\n\n      h1 {\n        font-size: 22px;\n        font-weight: 500;\n\n        text-align: center;\n\n        margin-bottom: 30px;\n      }\n\n      .separator {\n        margin: 10px 0;\n      }\n\n      canvas {\n        display: block;\n        margin: 16px auto 0 auto;\n      }\n    }\n  }\n`;","map":{"version":3,"sources":["../../../../../src/@terra-money/wallet-provider/modules/walletconnect/modal.tsx"],"names":[],"mappings":"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","sourcesContent":["import { IQRCodeModal, IQRCodeModalOptions } from '@walletconnect/types';\nimport QRCode from 'qrcode.react';\nimport React, { createElement, useCallback, useMemo } from 'react';\nimport { render } from 'react-dom';\nimport styled, { keyframes } from 'styled-components';\nimport { isMobile as isMobileBrowser } from '../../utils/browser-check';\n\nexport class TerraWalletconnectQrcodeModal implements IQRCodeModal {\n  modalContainer: HTMLDivElement | null = null;\n\n  private callback: (() => void) | null = null;\n\n  setCloseCallback = (callback: () => void) => {\n    this.callback = callback;\n  };\n\n  open = (\n    uri: string,\n    cb: () => void,\n    _qrcodeModalOptions?: IQRCodeModalOptions,\n  ) => {\n    const modalContainer = window.document.createElement('div');\n\n    const query = encodeURIComponent(\n      `action=wallet_connect&payload=${encodeURIComponent(uri)}`,\n    );\n\n    const schemeUri = `https://terrastation.page.link/?link=https://terra.money?${query}&apn=money.terra.station&ibi=money.terra.station&isi=1548434735`;\n\n    const modal = createElement(TerraQRCodeModal, {\n      schemeUri,\n      onClose: () => {\n        if (this.callback) {\n          this.callback();\n          this.callback = null;\n        }\n        this.close();\n      },\n    });\n\n    if (isMobileBrowser()) {\n      window.location.href = schemeUri;\n    }\n\n    render(modal, modalContainer);\n    window.document.querySelector('body')?.appendChild(modalContainer);\n\n    this.modalContainer = modalContainer;\n  };\n\n  close = () => {\n    if (this.modalContainer) {\n      this.modalContainer.parentElement?.removeChild(this.modalContainer);\n    }\n\n    this.callback = null;\n  };\n}\n\nfunction TerraQRCodeModalBase({\n  schemeUri,\n  className,\n  onClose,\n}: {\n  schemeUri: string;\n  className?: string;\n  onClose: () => void;\n}) {\n  const isMobile = useMemo(() => isMobileBrowser(), []);\n\n  const openTerraStationMobile = useCallback(() => {\n    window.location.href = schemeUri;\n  }, [schemeUri]);\n\n  return (\n    <div className={className}>\n      <div onClick={onClose} />\n      {isMobile ? (\n        <section className=\"mobile\">\n          <h1>Wallet Connect</h1>\n\n          <button onClick={openTerraStationMobile} className=\"flat-button\">\n            Open Terra Station Mobile\n          </button>\n        </section>\n      ) : (\n        <section className=\"desktop\">\n          <h1>Wallet Connect</h1>\n\n          <QRCode value={schemeUri} size={240} />\n        </section>\n      )}\n    </div>\n  );\n}\n\nconst modalEnter = keyframes`\n  0% {\n    opacity: 0;\n  }\n  \n  100% {\n    opacity: 1;\n  }\n`;\n\nconst sectionEnter = keyframes`\n  0% {\n    opacity: 0;\n    transform: scale(0.4);\n  }\n  \n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n`;\n\nconst TerraQRCodeModal = styled(TerraQRCodeModalBase)`\n  position: fixed;\n  z-index: 100000;\n\n  color: #000000;\n\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n\n  display: grid;\n  place-content: center;\n\n  > div {\n    position: fixed;\n    z-index: -1;\n\n    left: 0;\n    top: 0;\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(0, 0, 0, 0.3);\n\n    animation: ${modalEnter} 0.2s ease-in-out;\n  }\n\n  > section {\n    border-radius: 25px;\n\n    background-color: #ffffff;\n    box-shadow: 0 4px 18px 3px rgba(0, 0, 0, 0.43);\n\n    animation: ${sectionEnter} 0.2s ease-in-out;\n\n    button {\n      cursor: pointer;\n\n      display: block;\n      outline: none;\n      background-color: transparent;\n      width: 100%;\n      height: 32px;\n      font-size: 13px;\n      letter-spacing: -0.2px;\n      border-radius: 18px;\n      border: solid 1px #2c2c2c;\n\n      &.flat-button {\n        border: 0;\n        color: #ffffff;\n        background-color: #2c2c2c;\n      }\n    }\n\n    .separator {\n      height: 12px;\n\n      position: relative;\n\n      hr {\n        position: absolute;\n        top: 5px;\n        left: 0;\n        right: 0;\n\n        border: 0;\n        border-bottom: 1px dashed #cccccc;\n      }\n\n      span {\n        display: block;\n\n        position: absolute;\n        top: -4px;\n        left: 50%;\n        transform: translateX(-50%);\n\n        font-size: 12px;\n        color: #c2c2c2;\n        background-color: #ffffff;\n        padding: 0 2px;\n      }\n    }\n\n    &.desktop {\n      padding: 50px 60px;\n\n      h1 {\n        font-size: 27px;\n        font-weight: 500;\n\n        text-align: center;\n\n        margin-bottom: 24px;\n      }\n\n      button {\n        margin-top: 20px;\n      }\n    }\n\n    &.mobile {\n      padding: 40px 30px;\n      min-width: 320px;\n\n      h1 {\n        font-size: 22px;\n        font-weight: 500;\n\n        text-align: center;\n\n        margin-bottom: 30px;\n      }\n\n      .separator {\n        margin: 10px 0;\n      }\n\n      canvas {\n        display: block;\n        margin: 16px auto 0 auto;\n      }\n    }\n  }\n`;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}