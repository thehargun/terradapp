{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MsgAggregateExchangeRateVote = exports.aggregateVoteHash = void 0;\n\nvar SHA256_1 = require(\"jscrypto/SHA256\");\n\nvar json_1 = require(\"../../../util/json\");\n\nvar MsgAggregateExchangeRatePrevote_1 = require(\"./MsgAggregateExchangeRatePrevote\");\n\nvar Coins_1 = require(\"../../Coins\");\n\nvar any_1 = require(\"@terra-money/terra.proto/google/protobuf/any\");\n\nvar tx_1 = require(\"@terra-money/terra.proto/terra/oracle/v1beta1/tx\");\n/**\n * Calculates the aggregate vote hash\n * @param exchangeRates exchange rates\n * @param salt salt\n * @param validator validator operator address\n */\n\n\nfunction aggregateVoteHash(exchangeRates, salt, validator) {\n  var payload = salt + \":\" + exchangeRates.toDecCoins().toString() + \":\" + validator;\n  return SHA256_1.SHA256.hash(payload).toString().substring(0, 40);\n}\n\nexports.aggregateVoteHash = aggregateVoteHash;\n/**\n * Aggregate analog of MsgExchangeRateVote: submits an oracle vote for multiple denominations\n * through a single message rather than multiple messages.\n */\n\nvar MsgAggregateExchangeRateVote =\n/** @class */\nfunction (_super) {\n  __extends(MsgAggregateExchangeRateVote, _super);\n  /**\n   * @param exchange_rate exchange rates\n   * @param salt salt\n   * @param feeder feeder address\n   * @param validator validator operator address\n   */\n\n\n  function MsgAggregateExchangeRateVote(exchange_rates, salt, feeder, validator) {\n    var _this = _super.call(this) || this;\n\n    _this.salt = salt;\n    _this.feeder = feeder;\n    _this.validator = validator;\n    _this.exchange_rates = new Coins_1.Coins(exchange_rates).toDecCoins();\n    return _this;\n  }\n\n  MsgAggregateExchangeRateVote.fromAmino = function (data) {\n    var _a = data.value,\n        exchange_rates = _a.exchange_rates,\n        salt = _a.salt,\n        feeder = _a.feeder,\n        validator = _a.validator;\n    var xrs = Coins_1.Coins.fromString(exchange_rates);\n    return new MsgAggregateExchangeRateVote(xrs, salt, feeder, validator);\n  };\n\n  MsgAggregateExchangeRateVote.prototype.toAmino = function () {\n    var _a = this,\n        exchange_rates = _a.exchange_rates,\n        salt = _a.salt,\n        feeder = _a.feeder,\n        validator = _a.validator;\n\n    return {\n      type: 'oracle/MsgAggregateExchangeRateVote',\n      value: {\n        exchange_rates: exchange_rates.toDecCoins().toString(),\n        salt: salt,\n        feeder: feeder,\n        validator: validator\n      }\n    };\n  };\n\n  MsgAggregateExchangeRateVote.fromData = function (proto) {\n    var exchange_rates = proto.exchange_rates,\n        salt = proto.salt,\n        feeder = proto.feeder,\n        validator = proto.validator;\n    var xrs = Coins_1.Coins.fromString(exchange_rates);\n    return new MsgAggregateExchangeRateVote(xrs, salt, feeder, validator);\n  };\n\n  MsgAggregateExchangeRateVote.prototype.toData = function () {\n    var _a = this,\n        exchange_rates = _a.exchange_rates,\n        salt = _a.salt,\n        feeder = _a.feeder,\n        validator = _a.validator;\n\n    return {\n      '@type': '/terra.oracle.v1beta1.MsgAggregateExchangeRateVote',\n      exchange_rates: exchange_rates.toDecCoins().toString(),\n      salt: salt,\n      feeder: feeder,\n      validator: validator\n    };\n  };\n\n  MsgAggregateExchangeRateVote.fromProto = function (proto) {\n    var xrs = Coins_1.Coins.fromString(proto.exchangeRates);\n    return new MsgAggregateExchangeRateVote(xrs, proto.salt, proto.feeder, proto.validator);\n  };\n\n  MsgAggregateExchangeRateVote.prototype.toProto = function () {\n    var _a = this,\n        exchange_rates = _a.exchange_rates,\n        salt = _a.salt,\n        feeder = _a.feeder,\n        validator = _a.validator;\n\n    return tx_1.MsgAggregateExchangeRateVote.fromPartial({\n      exchangeRates: exchange_rates.toString(),\n      feeder: feeder,\n      salt: salt,\n      validator: validator\n    });\n  };\n  /**\n   * Gets the aggregate vote hash for the MsgAggregateExchangeRateVote, for the creation of\n   *  the corresponding prevote message.\n   */\n\n\n  MsgAggregateExchangeRateVote.prototype.getAggregateVoteHash = function () {\n    return aggregateVoteHash(this.exchange_rates, this.salt, this.validator);\n  };\n  /**\n   * You can generate the corresponding aggregate prevote message.\n   * This will return a [[MsgAggregateExchangeRatePrevote]] with the proper vote hash and values,\n   * determined by the current attributes of the object.\n   *\n   * @returns the corresponding prevote message to send\n   */\n\n\n  MsgAggregateExchangeRateVote.prototype.getPrevote = function () {\n    return new MsgAggregateExchangeRatePrevote_1.MsgAggregateExchangeRatePrevote(this.getAggregateVoteHash(), this.feeder, this.validator);\n  };\n\n  MsgAggregateExchangeRateVote.prototype.packAny = function () {\n    return any_1.Any.fromPartial({\n      typeUrl: '/terra.oracle.v1beta1.MsgAggregateExchangeRateVote',\n      value: tx_1.MsgAggregateExchangeRateVote.encode(this.toProto()).finish()\n    });\n  };\n\n  MsgAggregateExchangeRateVote.unpackAny = function (msgAny) {\n    return MsgAggregateExchangeRateVote.fromProto(tx_1.MsgAggregateExchangeRateVote.decode(msgAny.value));\n  };\n\n  return MsgAggregateExchangeRateVote;\n}(json_1.JSONSerializable);\n\nexports.MsgAggregateExchangeRateVote = MsgAggregateExchangeRateVote;","map":{"version":3,"sources":["../../../../src/core/oracle/msgs/MsgAggregateExchangeRateVote.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MsgAggregateExchangeRateVote = exports.aggregateVoteHash = void 0;\nvar SHA256_1 = require(\"jscrypto/SHA256\");\nvar json_1 = require(\"../../../util/json\");\nvar MsgAggregateExchangeRatePrevote_1 = require(\"./MsgAggregateExchangeRatePrevote\");\nvar Coins_1 = require(\"../../Coins\");\nvar any_1 = require(\"@terra-money/terra.proto/google/protobuf/any\");\nvar tx_1 = require(\"@terra-money/terra.proto/terra/oracle/v1beta1/tx\");\n/**\n * Calculates the aggregate vote hash\n * @param exchangeRates exchange rates\n * @param salt salt\n * @param validator validator operator address\n */\nfunction aggregateVoteHash(exchangeRates, salt, validator) {\n    var payload = salt + \":\" + exchangeRates\n        .toDecCoins()\n        .toString() + \":\" + validator;\n    return SHA256_1.SHA256.hash(payload).toString().substring(0, 40);\n}\nexports.aggregateVoteHash = aggregateVoteHash;\n/**\n * Aggregate analog of MsgExchangeRateVote: submits an oracle vote for multiple denominations\n * through a single message rather than multiple messages.\n */\nvar MsgAggregateExchangeRateVote = /** @class */ (function (_super) {\n    __extends(MsgAggregateExchangeRateVote, _super);\n    /**\n     * @param exchange_rate exchange rates\n     * @param salt salt\n     * @param feeder feeder address\n     * @param validator validator operator address\n     */\n    function MsgAggregateExchangeRateVote(exchange_rates, salt, feeder, validator) {\n        var _this = _super.call(this) || this;\n        _this.salt = salt;\n        _this.feeder = feeder;\n        _this.validator = validator;\n        _this.exchange_rates = new Coins_1.Coins(exchange_rates).toDecCoins();\n        return _this;\n    }\n    MsgAggregateExchangeRateVote.fromAmino = function (data) {\n        var _a = data.value, exchange_rates = _a.exchange_rates, salt = _a.salt, feeder = _a.feeder, validator = _a.validator;\n        var xrs = Coins_1.Coins.fromString(exchange_rates);\n        return new MsgAggregateExchangeRateVote(xrs, salt, feeder, validator);\n    };\n    MsgAggregateExchangeRateVote.prototype.toAmino = function () {\n        var _a = this, exchange_rates = _a.exchange_rates, salt = _a.salt, feeder = _a.feeder, validator = _a.validator;\n        return {\n            type: 'oracle/MsgAggregateExchangeRateVote',\n            value: {\n                exchange_rates: exchange_rates.toDecCoins().toString(),\n                salt: salt,\n                feeder: feeder,\n                validator: validator,\n            },\n        };\n    };\n    MsgAggregateExchangeRateVote.fromData = function (proto) {\n        var exchange_rates = proto.exchange_rates, salt = proto.salt, feeder = proto.feeder, validator = proto.validator;\n        var xrs = Coins_1.Coins.fromString(exchange_rates);\n        return new MsgAggregateExchangeRateVote(xrs, salt, feeder, validator);\n    };\n    MsgAggregateExchangeRateVote.prototype.toData = function () {\n        var _a = this, exchange_rates = _a.exchange_rates, salt = _a.salt, feeder = _a.feeder, validator = _a.validator;\n        return {\n            '@type': '/terra.oracle.v1beta1.MsgAggregateExchangeRateVote',\n            exchange_rates: exchange_rates.toDecCoins().toString(),\n            salt: salt,\n            feeder: feeder,\n            validator: validator,\n        };\n    };\n    MsgAggregateExchangeRateVote.fromProto = function (proto) {\n        var xrs = Coins_1.Coins.fromString(proto.exchangeRates);\n        return new MsgAggregateExchangeRateVote(xrs, proto.salt, proto.feeder, proto.validator);\n    };\n    MsgAggregateExchangeRateVote.prototype.toProto = function () {\n        var _a = this, exchange_rates = _a.exchange_rates, salt = _a.salt, feeder = _a.feeder, validator = _a.validator;\n        return tx_1.MsgAggregateExchangeRateVote.fromPartial({\n            exchangeRates: exchange_rates.toString(),\n            feeder: feeder,\n            salt: salt,\n            validator: validator,\n        });\n    };\n    /**\n     * Gets the aggregate vote hash for the MsgAggregateExchangeRateVote, for the creation of\n     *  the corresponding prevote message.\n     */\n    MsgAggregateExchangeRateVote.prototype.getAggregateVoteHash = function () {\n        return aggregateVoteHash(this.exchange_rates, this.salt, this.validator);\n    };\n    /**\n     * You can generate the corresponding aggregate prevote message.\n     * This will return a [[MsgAggregateExchangeRatePrevote]] with the proper vote hash and values,\n     * determined by the current attributes of the object.\n     *\n     * @returns the corresponding prevote message to send\n     */\n    MsgAggregateExchangeRateVote.prototype.getPrevote = function () {\n        return new MsgAggregateExchangeRatePrevote_1.MsgAggregateExchangeRatePrevote(this.getAggregateVoteHash(), this.feeder, this.validator);\n    };\n    MsgAggregateExchangeRateVote.prototype.packAny = function () {\n        return any_1.Any.fromPartial({\n            typeUrl: '/terra.oracle.v1beta1.MsgAggregateExchangeRateVote',\n            value: tx_1.MsgAggregateExchangeRateVote.encode(this.toProto()).finish(),\n        });\n    };\n    MsgAggregateExchangeRateVote.unpackAny = function (msgAny) {\n        return MsgAggregateExchangeRateVote.fromProto(tx_1.MsgAggregateExchangeRateVote.decode(msgAny.value));\n    };\n    return MsgAggregateExchangeRateVote;\n}(json_1.JSONSerializable));\nexports.MsgAggregateExchangeRateVote = MsgAggregateExchangeRateVote;\n//# sourceMappingURL=MsgAggregateExchangeRateVote.js.map"]},"metadata":{},"sourceType":"script"}