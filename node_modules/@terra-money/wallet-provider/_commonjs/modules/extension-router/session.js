"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.clearSession = exports.storeSession = exports.getStoredSession = exports.storage = void 0;
exports.storage = typeof window === 'undefined' ? undefined : localStorage;
const SESSION_KEY = '__terra_extension_router_session__';
function getStoredSession() {
    const data = exports.storage === null || exports.storage === void 0 ? void 0 : exports.storage.getItem(SESSION_KEY);
    if (!data) {
        return undefined;
    }
    try {
        const object = JSON.parse(data);
        if ('identifier' in object) {
            return {
                identifier: object['identifier'],
            };
        }
        else {
            exports.storage === null || exports.storage === void 0 ? void 0 : exports.storage.removeItem(SESSION_KEY);
            return undefined;
        }
    }
    catch (_a) {
        exports.storage === null || exports.storage === void 0 ? void 0 : exports.storage.removeItem(SESSION_KEY);
        return undefined;
    }
}
exports.getStoredSession = getStoredSession;
function storeSession(session) {
    exports.storage === null || exports.storage === void 0 ? void 0 : exports.storage.setItem(SESSION_KEY, JSON.stringify(session));
}
exports.storeSession = storeSession;
function clearSession() {
    exports.storage === null || exports.storage === void 0 ? void 0 : exports.storage.removeItem(SESSION_KEY);
}
exports.clearSession = clearSession;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2Vzc2lvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9AdGVycmEtbW9uZXkvd2FsbGV0LXByb3ZpZGVyL21vZHVsZXMvZXh0ZW5zaW9uLXJvdXRlci9zZXNzaW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFhLFFBQUEsT0FBTyxHQUFHLE9BQU8sTUFBTSxLQUFLLFdBQVcsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUM7QUFNaEYsTUFBTSxXQUFXLEdBQUcsb0NBQW9DLENBQUM7QUFFekQsU0FBZ0IsZ0JBQWdCO0lBQzlCLE1BQU0sSUFBSSxHQUFHLGVBQU8sYUFBUCxlQUFPLHVCQUFQLGVBQU8sQ0FBRSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFM0MsSUFBSSxDQUFDLElBQUksRUFBRTtRQUNULE9BQU8sU0FBUyxDQUFDO0tBQ2xCO0lBRUQsSUFBSTtRQUNGLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFaEMsSUFBSSxZQUFZLElBQUksTUFBTSxFQUFFO1lBQzFCLE9BQU87Z0JBQ0wsVUFBVSxFQUFFLE1BQU0sQ0FBQyxZQUFZLENBQUM7YUFDakMsQ0FBQztTQUNIO2FBQU07WUFDTCxlQUFPLGFBQVAsZUFBTyx1QkFBUCxlQUFPLENBQUUsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ2pDLE9BQU8sU0FBUyxDQUFDO1NBQ2xCO0tBQ0Y7SUFBQyxXQUFNO1FBQ04sZUFBTyxhQUFQLGVBQU8sdUJBQVAsZUFBTyxDQUFFLFVBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNqQyxPQUFPLFNBQVMsQ0FBQztLQUNsQjtBQUNILENBQUM7QUF0QkQsNENBc0JDO0FBRUQsU0FBZ0IsWUFBWSxDQUFDLE9BQWdCO0lBQzNDLGVBQU8sYUFBUCxlQUFPLHVCQUFQLGVBQU8sQ0FBRSxPQUFPLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUN6RCxDQUFDO0FBRkQsb0NBRUM7QUFFRCxTQUFnQixZQUFZO0lBQzFCLGVBQU8sYUFBUCxlQUFPLHVCQUFQLGVBQU8sQ0FBRSxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDbkMsQ0FBQztBQUZELG9DQUVDIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHN0b3JhZ2UgPSB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyA/IHVuZGVmaW5lZCA6IGxvY2FsU3RvcmFnZTtcblxuaW50ZXJmYWNlIFNlc3Npb24ge1xuICBpZGVudGlmaWVyOiBzdHJpbmc7XG59XG5cbmNvbnN0IFNFU1NJT05fS0VZID0gJ19fdGVycmFfZXh0ZW5zaW9uX3JvdXRlcl9zZXNzaW9uX18nO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcmVkU2Vzc2lvbigpOiBTZXNzaW9uIHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgZGF0YSA9IHN0b3JhZ2U/LmdldEl0ZW0oU0VTU0lPTl9LRVkpO1xuXG4gIGlmICghZGF0YSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IG9iamVjdCA9IEpTT04ucGFyc2UoZGF0YSk7XG5cbiAgICBpZiAoJ2lkZW50aWZpZXInIGluIG9iamVjdCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWRlbnRpZmllcjogb2JqZWN0WydpZGVudGlmaWVyJ10sXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdG9yYWdlPy5yZW1vdmVJdGVtKFNFU1NJT05fS0VZKTtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICBzdG9yYWdlPy5yZW1vdmVJdGVtKFNFU1NJT05fS0VZKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVNlc3Npb24oc2Vzc2lvbjogU2Vzc2lvbikge1xuICBzdG9yYWdlPy5zZXRJdGVtKFNFU1NJT05fS0VZLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclNlc3Npb24oKSB7XG4gIHN0b3JhZ2U/LnJlbW92ZUl0ZW0oU0VTU0lPTl9LRVkpO1xufVxuIl19