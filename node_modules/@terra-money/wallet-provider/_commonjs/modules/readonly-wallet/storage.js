"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.clearStoredSession = exports.storeSession = exports.getStoredSession = void 0;
const terra_js_1 = require("@terra-money/terra.js");
const STORAGE_KEY = '__terra-readonly-wallet-storage-key__';
function getStoredSession() {
    const storedSessionString = localStorage.getItem(STORAGE_KEY);
    if (!storedSessionString)
        return undefined;
    try {
        const storedSession = JSON.parse(storedSessionString);
        if ('terraAddress' in storedSession &&
            'network' in storedSession &&
            typeof storedSession['terraAddress'] === 'string' &&
            terra_js_1.AccAddress.validate(storedSession.terraAddress)) {
            return storedSession;
        }
        else {
            localStorage.removeItem(STORAGE_KEY);
            return undefined;
        }
    }
    catch (_a) {
        localStorage.removeItem(STORAGE_KEY);
        return undefined;
    }
}
exports.getStoredSession = getStoredSession;
function storeSession(session) {
    if (!terra_js_1.AccAddress.validate(session.terraAddress)) {
        throw new Error(`${session.terraAddress} is not a terraAddress`);
    }
    localStorage.setItem(STORAGE_KEY, JSON.stringify(session));
}
exports.storeSession = storeSession;
function clearStoredSession() {
    localStorage.removeItem(STORAGE_KEY);
}
exports.clearStoredSession = clearStoredSession;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmFnZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9AdGVycmEtbW9uZXkvd2FsbGV0LXByb3ZpZGVyL21vZHVsZXMvcmVhZG9ubHktd2FsbGV0L3N0b3JhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsb0RBQW1EO0FBR25ELE1BQU0sV0FBVyxHQUFHLHVDQUF1QyxDQUFDO0FBRTVELFNBQWdCLGdCQUFnQjtJQUM5QixNQUFNLG1CQUFtQixHQUFHLFlBQVksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7SUFFOUQsSUFBSSxDQUFDLG1CQUFtQjtRQUFFLE9BQU8sU0FBUyxDQUFDO0lBRTNDLElBQUk7UUFDRixNQUFNLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFFdEQsSUFDRSxjQUFjLElBQUksYUFBYTtZQUMvQixTQUFTLElBQUksYUFBYTtZQUMxQixPQUFPLGFBQWEsQ0FBQyxjQUFjLENBQUMsS0FBSyxRQUFRO1lBQ2pELHFCQUFVLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsRUFDL0M7WUFDQSxPQUFPLGFBQWEsQ0FBQztTQUN0QjthQUFNO1lBQ0wsWUFBWSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNyQyxPQUFPLFNBQVMsQ0FBQztTQUNsQjtLQUNGO0lBQUMsV0FBTTtRQUNOLFlBQVksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDckMsT0FBTyxTQUFTLENBQUM7S0FDbEI7QUFDSCxDQUFDO0FBdkJELDRDQXVCQztBQUVELFNBQWdCLFlBQVksQ0FBQyxPQUE4QjtJQUN6RCxJQUFJLENBQUMscUJBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxFQUFFO1FBQzlDLE1BQU0sSUFBSSxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUMsWUFBWSx3QkFBd0IsQ0FBQyxDQUFDO0tBQ2xFO0lBQ0QsWUFBWSxDQUFDLE9BQU8sQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQzdELENBQUM7QUFMRCxvQ0FLQztBQUVELFNBQWdCLGtCQUFrQjtJQUNoQyxZQUFZLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3ZDLENBQUM7QUFGRCxnREFFQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjY0FkZHJlc3MgfSBmcm9tICdAdGVycmEtbW9uZXkvdGVycmEuanMnO1xuaW1wb3J0IHsgUmVhZG9ubHlXYWxsZXRTZXNzaW9uIH0gZnJvbSAnLi90eXBlcyc7XG5cbmNvbnN0IFNUT1JBR0VfS0VZID0gJ19fdGVycmEtcmVhZG9ubHktd2FsbGV0LXN0b3JhZ2Uta2V5X18nO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcmVkU2Vzc2lvbigpOiBSZWFkb25seVdhbGxldFNlc3Npb24gfCB1bmRlZmluZWQge1xuICBjb25zdCBzdG9yZWRTZXNzaW9uU3RyaW5nID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oU1RPUkFHRV9LRVkpO1xuXG4gIGlmICghc3RvcmVkU2Vzc2lvblN0cmluZykgcmV0dXJuIHVuZGVmaW5lZDtcblxuICB0cnkge1xuICAgIGNvbnN0IHN0b3JlZFNlc3Npb24gPSBKU09OLnBhcnNlKHN0b3JlZFNlc3Npb25TdHJpbmcpO1xuXG4gICAgaWYgKFxuICAgICAgJ3RlcnJhQWRkcmVzcycgaW4gc3RvcmVkU2Vzc2lvbiAmJlxuICAgICAgJ25ldHdvcmsnIGluIHN0b3JlZFNlc3Npb24gJiZcbiAgICAgIHR5cGVvZiBzdG9yZWRTZXNzaW9uWyd0ZXJyYUFkZHJlc3MnXSA9PT0gJ3N0cmluZycgJiZcbiAgICAgIEFjY0FkZHJlc3MudmFsaWRhdGUoc3RvcmVkU2Vzc2lvbi50ZXJyYUFkZHJlc3MpXG4gICAgKSB7XG4gICAgICByZXR1cm4gc3RvcmVkU2Vzc2lvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9LRVkpO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0gY2F0Y2gge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZKTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZVNlc3Npb24oc2Vzc2lvbjogUmVhZG9ubHlXYWxsZXRTZXNzaW9uKSB7XG4gIGlmICghQWNjQWRkcmVzcy52YWxpZGF0ZShzZXNzaW9uLnRlcnJhQWRkcmVzcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7c2Vzc2lvbi50ZXJyYUFkZHJlc3N9IGlzIG5vdCBhIHRlcnJhQWRkcmVzc2ApO1xuICB9XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclN0b3JlZFNlc3Npb24oKSB7XG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZKTtcbn1cbiJdfQ==