"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useConnectedWallet = void 0;
const terra_js_1 = require("@terra-money/terra.js");
const react_1 = require("react");
const types_1 = require("./types");
const useWallet_1 = require("./useWallet");
function useConnectedWallet() {
    const { status, network, wallets, post, sign, signBytes, supportFeatures } = (0, useWallet_1.useWallet)();
    const value = (0, react_1.useMemo)(() => {
        try {
            if (status === types_1.WalletStatus.WALLET_CONNECTED &&
                wallets.length > 0 &&
                terra_js_1.AccAddress.validate(wallets[0].terraAddress)) {
                const { terraAddress, connectType, design } = wallets[0];
                return {
                    network,
                    terraAddress: terraAddress,
                    walletAddress: terraAddress,
                    design,
                    post: (tx) => {
                        return post(tx, terraAddress);
                    },
                    sign: (tx) => {
                        return sign(tx, terraAddress);
                    },
                    signBytes: (bytes) => {
                        return signBytes(bytes, terraAddress);
                    },
                    availablePost: supportFeatures.has('post'),
                    availableSign: supportFeatures.has('sign'),
                    availableSignBytes: supportFeatures.has('sign-bytes'),
                    connectType,
                };
            }
            else {
                return undefined;
            }
        }
        catch (_a) {
            return undefined;
        }
    }, [network, post, sign, signBytes, status, supportFeatures, wallets]);
    return value;
}
exports.useConnectedWallet = useConnectedWallet;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlQ29ubmVjdGVkV2FsbGV0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL0B0ZXJyYS1tb25leS91c2Utd2FsbGV0L3VzZUNvbm5lY3RlZFdhbGxldC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxvREFBb0U7QUFDcEUsaUNBQWdDO0FBQ2hDLG1DQU9pQjtBQUNqQiwyQ0FBd0M7QUFtQnhDLFNBQWdCLGtCQUFrQjtJQUNoQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsZUFBZSxFQUFFLEdBQ3hFLElBQUEscUJBQVMsR0FBRSxDQUFDO0lBRWQsTUFBTSxLQUFLLEdBQUcsSUFBQSxlQUFPLEVBQThCLEdBQUcsRUFBRTtRQUN0RCxJQUFJO1lBQ0YsSUFDRSxNQUFNLEtBQUssb0JBQVksQ0FBQyxnQkFBZ0I7Z0JBQ3hDLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQztnQkFDbEIscUJBQVUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxFQUM1QztnQkFDQSxNQUFNLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUUsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBRXpELE9BQU87b0JBQ0wsT0FBTztvQkFDUCxZQUFZLEVBQUUsWUFBeUI7b0JBQ3ZDLGFBQWEsRUFBRSxZQUF5QjtvQkFDeEMsTUFBTTtvQkFDTixJQUFJLEVBQUUsQ0FBQyxFQUFtQixFQUFFLEVBQUU7d0JBQzVCLE9BQU8sSUFBSSxDQUFDLEVBQUUsRUFBRSxZQUFZLENBQUMsQ0FBQztvQkFDaEMsQ0FBQztvQkFDRCxJQUFJLEVBQUUsQ0FBQyxFQUFtQixFQUFFLEVBQUU7d0JBQzVCLE9BQU8sSUFBSSxDQUFDLEVBQUUsRUFBRSxZQUFZLENBQUMsQ0FBQztvQkFDaEMsQ0FBQztvQkFDRCxTQUFTLEVBQUUsQ0FBQyxLQUFhLEVBQUUsRUFBRTt3QkFDM0IsT0FBTyxTQUFTLENBQUMsS0FBSyxFQUFFLFlBQVksQ0FBQyxDQUFDO29CQUN4QyxDQUFDO29CQUNELGFBQWEsRUFBRSxlQUFlLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQztvQkFDMUMsYUFBYSxFQUFFLGVBQWUsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDO29CQUMxQyxrQkFBa0IsRUFBRSxlQUFlLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQztvQkFDckQsV0FBVztpQkFDWixDQUFDO2FBQ0g7aUJBQU07Z0JBQ0wsT0FBTyxTQUFTLENBQUM7YUFDbEI7U0FDRjtRQUFDLFdBQU07WUFDTixPQUFPLFNBQVMsQ0FBQztTQUNsQjtJQUNILENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFFdkUsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBekNELGdEQXlDQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjY0FkZHJlc3MsIENyZWF0ZVR4T3B0aW9ucyB9IGZyb20gJ0B0ZXJyYS1tb25leS90ZXJyYS5qcyc7XG5pbXBvcnQgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcbiAgQ29ubmVjdFR5cGUsXG4gIE5ldHdvcmtJbmZvLFxuICBTaWduQnl0ZXNSZXN1bHQsXG4gIFNpZ25SZXN1bHQsXG4gIFR4UmVzdWx0LFxuICBXYWxsZXRTdGF0dXMsXG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgdXNlV2FsbGV0IH0gZnJvbSAnLi91c2VXYWxsZXQnO1xuXG50eXBlIEh1bWFuQWRkciA9IHN0cmluZyAmIHsgX190eXBlOiAnSHVtYW5BZGRyJyB9O1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3RlZFdhbGxldCB7XG4gIG5ldHdvcms6IE5ldHdvcmtJbmZvO1xuICB3YWxsZXRBZGRyZXNzOiBIdW1hbkFkZHI7XG4gIC8qKiB0ZXJyYUFkZHJlc3MgaXMgc2FtZSBhcyB3YWxsZXRBZGRyZXNzICovXG4gIHRlcnJhQWRkcmVzczogSHVtYW5BZGRyO1xuICBkZXNpZ24/OiBzdHJpbmc7XG4gIHBvc3Q6ICh0eDogQ3JlYXRlVHhPcHRpb25zKSA9PiBQcm9taXNlPFR4UmVzdWx0PjtcbiAgc2lnbjogKHR4OiBDcmVhdGVUeE9wdGlvbnMpID0+IFByb21pc2U8U2lnblJlc3VsdD47XG4gIHNpZ25CeXRlczogKGJ5dGVzOiBCdWZmZXIpID0+IFByb21pc2U8U2lnbkJ5dGVzUmVzdWx0PjtcbiAgYXZhaWxhYmxlUG9zdDogYm9vbGVhbjtcbiAgYXZhaWxhYmxlU2lnbjogYm9vbGVhbjtcbiAgYXZhaWxhYmxlU2lnbkJ5dGVzOiBib29sZWFuO1xuICBjb25uZWN0VHlwZTogQ29ubmVjdFR5cGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VDb25uZWN0ZWRXYWxsZXQoKTogQ29ubmVjdGVkV2FsbGV0IHwgdW5kZWZpbmVkIHtcbiAgY29uc3QgeyBzdGF0dXMsIG5ldHdvcmssIHdhbGxldHMsIHBvc3QsIHNpZ24sIHNpZ25CeXRlcywgc3VwcG9ydEZlYXR1cmVzIH0gPVxuICAgIHVzZVdhbGxldCgpO1xuXG4gIGNvbnN0IHZhbHVlID0gdXNlTWVtbzxDb25uZWN0ZWRXYWxsZXQgfCB1bmRlZmluZWQ+KCgpID0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKFxuICAgICAgICBzdGF0dXMgPT09IFdhbGxldFN0YXR1cy5XQUxMRVRfQ09OTkVDVEVEICYmXG4gICAgICAgIHdhbGxldHMubGVuZ3RoID4gMCAmJlxuICAgICAgICBBY2NBZGRyZXNzLnZhbGlkYXRlKHdhbGxldHNbMF0udGVycmFBZGRyZXNzKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHsgdGVycmFBZGRyZXNzLCBjb25uZWN0VHlwZSwgZGVzaWduIH0gPSB3YWxsZXRzWzBdO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbmV0d29yayxcbiAgICAgICAgICB0ZXJyYUFkZHJlc3M6IHRlcnJhQWRkcmVzcyBhcyBIdW1hbkFkZHIsXG4gICAgICAgICAgd2FsbGV0QWRkcmVzczogdGVycmFBZGRyZXNzIGFzIEh1bWFuQWRkcixcbiAgICAgICAgICBkZXNpZ24sXG4gICAgICAgICAgcG9zdDogKHR4OiBDcmVhdGVUeE9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwb3N0KHR4LCB0ZXJyYUFkZHJlc3MpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2lnbjogKHR4OiBDcmVhdGVUeE9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBzaWduKHR4LCB0ZXJyYUFkZHJlc3MpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2lnbkJ5dGVzOiAoYnl0ZXM6IEJ1ZmZlcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHNpZ25CeXRlcyhieXRlcywgdGVycmFBZGRyZXNzKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGF2YWlsYWJsZVBvc3Q6IHN1cHBvcnRGZWF0dXJlcy5oYXMoJ3Bvc3QnKSxcbiAgICAgICAgICBhdmFpbGFibGVTaWduOiBzdXBwb3J0RmVhdHVyZXMuaGFzKCdzaWduJyksXG4gICAgICAgICAgYXZhaWxhYmxlU2lnbkJ5dGVzOiBzdXBwb3J0RmVhdHVyZXMuaGFzKCdzaWduLWJ5dGVzJyksXG4gICAgICAgICAgY29ubmVjdFR5cGUsXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sIFtuZXR3b3JrLCBwb3N0LCBzaWduLCBzaWduQnl0ZXMsIHN0YXR1cywgc3VwcG9ydEZlYXR1cmVzLCB3YWxsZXRzXSk7XG5cbiAgcmV0dXJuIHZhbHVlO1xufVxuIl19